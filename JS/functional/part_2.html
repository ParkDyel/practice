<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="X-UA-Compatible" content="ie=edge">
  <title>Document</title>
</head>
<body>
  <script src="./fs.js"></script>
  ### 함수 조합으로 함수 만들어졌기

  <script>
  const products = [
    {name: "iphone", price: 15000, quantity: 1},
    {name: "S10", price: 30000, quantity: 2},
    {name: "G50", price: 20000, quantity: 3},
    {name: "V50", price: 70000, quantity: 1},
    {name: "Q30", price: 26000, quantity: 5},
  ]
  </script>

  <script>
  go(
    products,
    filter(p => p.price < 20000),
    map(p=>p.price),
    reduce(add),
    log
  )

  go(
    products,
    filter(p => p.price >= 20000),
    map(p=>p.price),
    reduce(add),
    log
  )
  const total_price = pipe(
      map(p=>p.price), reduce(add)
    );
  
    go(
    products,
    filter(p => p.price < 20000),
    total_price,
    log
  )

  go(
    products,
    filter(p => p.price >= 20000),
    total_price,
    log
  )

  const base_total_price = predi => pipe(
    filter(predi),
    total_price
  )

  go(
    products,
    base_total_price(p => p.price < 20000),
    log
  )

  go(
    products,
    base_total_price(p => p.price >= 20000),
    log
  )
  console.clear();
  </script>

  <script>
  const add = (a, b) => a + b;

  const sum = (f, iter) => go(
    iter,
    map(f),
    reduce(add)
  )

  // const sum = curry((f, iter) => go(
  //   iter,
  //   map(f),
  //   reduce(add)
  // ))

  const total_quantity = pipe(
    map(p => p.price),
    reduce(add)
  )

  // with sum
  // const total_price = (products) => sum(p => p.quantity, products);

  // with curry in sum
  // const total_price = sum(p => p.quantity)
  
  console.log(total_quantity(products))
  
  const total_price = pipe(
    map(p => p.price * p.quantity),
    reduce(add)
    )
    
    // with sum
    // const total_price = (products) => sum(p => p.price * p.quantity, products); 
    
    // with curry in sum
    // const total_price = sum(p => p.price * p.quantity)
    
    console.log(totla_price(products))
  </script>
</body>
</html>


